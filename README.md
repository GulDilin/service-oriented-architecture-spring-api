# Service Oriented Architecture. Laboratory Work 2

### Variant 3005.11

### Доработать веб-сервис и клиентское приложение из лабораторной работы #1 следующим образом:

1. Отрефакторить сервис из лабораторной работы #1, переписав его на фреймворке Spring MVC REST с сохранением функциональности и API.
Набор функций, реализуемых сервисом, изменяться не должен!
2. Развернуть переработанный сервис на сервере приложений Tomcat.
3. Разработать новый сервис, вызывающий API существующего.
4. Новый сервис должен быть разработан на базе JAX-RS и развёрнут на сервере приложений Payara.
5. Разработать клиентское приложение, позволяющее протестировать API нового сервиса.
6. Доступ к обоим сервисам должен быть реализован с по протоколу https с самоподписанным сертификатом сервера. Доступ к сервисам посредством http без шифрования должен быть запрещён.

### Новый сервис должен располагаться на URL /route и реализовывать следующие операции:
```
/calculate/length/{id1}/{id2} : рассчитать длину маршрута из города с id=id1 в город с id=id2
/calculate/to-max-populated : рассчитать длину маршрута от точки с координатами (0,0,0) до города с максимальным населением
```
    

### Оба веб-сервиса и клиентское приложение должны быть развёрнуты на сервере helios.

### Вопросы к защите лабораторной работы:

1. Разработка RESTful веб-сервисов на платформе Java EE. Технология JAX-RS.
2. Основные и вспомогательные аннотации JAX-RS.
3. Описание ресурсов в JAX-RS.
4. Разработка RESTful веб-сервисов на платформе Spring.
5. Технология Spring Web MVC REST. Отношение к Spring Web MVC, сходства и отличия от JAX-RS.
6. Элементы архитектуры Spring Web MVC: Dispatcher Servlet, Handler Mapping, View Resolver.
7. Аннотации Spring Web MVC.
8. Сериализация / десериализация данных в Spring Web MVC REST.
9. Технология Spring Data REST. Преимущества и недостатки относительно JAX-RS и Spring Web MVC REST.
10. Spring Data REST: стратегии экспорта репозиториев, типы ресурсов, автоматическое описание сервисов.
11. Интеграция веб-сервисов. Настройка защищённого соединения между узлами. Основы криптографии.
12. TLS & SSL. Основные термины.
13. Симметричное и асимметричное шифрование. Приватный и публичный ключи, сертификаты. Генерация сертификатов.
14. Доверенные центры сертификации. Иерархия сертификатов, самоподписанные сертификаты.
15. Настройка защищённого соединения в Java. Доверенные узлы, хранилища сертификатов.
16. Keystore & Truststore. Утилита keytool.



# Service Oriented Architecture. Laboratory Work 1

### Variant 3005

Разработать веб-сервис на базе сервлета, реализующий управление коллекцией объектов, и клиентское веб-приложение,
предоставляющее интерфейс к разработанному веб-сервису. В коллекции необходимо хранить объекты класса City, описание
которого приведено ниже:

```java
public class City {
    private Integer id; //Поле не может быть null, Значение поля должно быть больше 0, Значение этого поля должно быть уникальным, Значение этого поля должно генерироваться автоматически
    private String name; //Поле не может быть null, Строка не может быть пустой
    private Coordinates coordinates; //Поле не может быть null
    private java.time.ZonedDateTime creationDate; //Поле не может быть null, Значение этого поля должно генерироваться автоматически
    private Integer area; //Значение поля должно быть больше 0, Поле не может быть null
    private Integer population; //Значение поля должно быть больше 0, Поле не может быть null
    private float metersAboveSeaLevel;
    private int populationDensity; //Значение поля должно быть больше 0
    private Integer carCode; //Значение поля должно быть больше 0, Максимальное значение поля: 1000, Поле может быть null
    private Climate climate; //Поле не может быть null
    private Human governor; //Поле может быть null
}

public class Coordinates {
    private long x; //Значение поля должно быть больше -667
    private int y;
}

public class Human {
    private java.time.LocalDate birthday;
}

public enum Climate {
    RAIN_FOREST,
    MONSOON,
    SUBARCTIC
}
```

### Веб-сервис должен удовлетворять следующим требованиям:

- API, реализуемый сервисом, должен соответствовать рекомендациям подхода RESTful.
- Необходимо реализовать следующий базовый набор операций с объектами коллекции:
    * добавление нового элемента
    * получение элемента по ИД
    * обновление элемента
    * удаление элемента
    * получение массива элементов.
- Операция, выполняемая над объектом коллекции, должна определяться методом HTTP-запроса.
- Операция получения массива элементов должна поддерживать возможность сортировки и фильтрации по любой комбинации полей
  класса, а также возможность постраничного вывода результатов выборки с указанием размера и порядкового номера
  выводимой страницы.
- Все параметры, необходимые для выполнения операции, должны передаваться в URL запроса.
- Данные коллекции, которыми управляет веб-сервис, должны храниться в реляционной базе данных.
- Информация об объектах коллекции должна передаваться в формате json.
- В случае передачи сервису данных, нарушающих заданные на уровне класса ограничения целостности, сервис должен
  возвращать код ответа http, соответствующий произошедшей ошибке.
- Веб-сервис должен быть "упакован" в веб-приложение, которое необходимо развернуть на сервере приложений Tomcat.

### Помимо базового набора, веб-сервис должен поддерживать следующие операции над объектами коллекции:

- Вернуть количество объектов, значение поля climate которых больше заданного.
- Вернуть массив объектов, значение поля name которых содержит заданную подстроку.
- Вернуть массив объектов, значение поля name которых начинается с заданной подстроки.

### Эти операции должны размещаться на отдельных URL.

### Требования к клиентскому приложению:

- Клиентское приложение может быть написано на любом веб-фреймворке, который можно запустить на сервере helios.
- Клиентское приложение должно обеспечить полный набор возможностей по управлению объектами коллекции, предоставляемых
  веб-сервисом -- включая сортировку, фильтрацию и постраничный вывод.
- Клиентское приложение должно преобразовывать передаваемые сервисом данные в человеко-читаемый вид -- параграф текста,
  таблицу и т.д.
- Клиентское приложение должно информировать пользователя об ошибках, возникающих на стороне сервиса, в частности, о
  том, что сервису были отправлены невалиданые данные.

### Веб-сервис и клиентское приложение должны быть развёрнуты на сервере helios.

### Вопросы к защите лабораторной работы:

- Подходы к проектированию приложений. "Монолитная" и сервис-ориентированная архитектура.
- Понятие сервиса. Общие свойства сервисов.
- Основные принципы SOA. Подходы к реализации SOA, стандарты и протоколы.
- Общие принципы построения и элементы сервис-ориентированных систем.
- Понятие веб-сервиса. Определение, особенности, отличия от веб-приложений.
- Категоризация веб-сервисов. RESTful и SOAP. Сходства и отличия, области применения.
- RESTful веб-сервисы. Особенности подхода. Понятия ресурса, URI и полезной нагрузки (payload).
- Виды RESTful-сервисов. Интерпретация методов HTTP в RESTful.
- Правила именования ресурсов в RESTful сервисах.
- Разработка RESTful сервисов. Языки программирования, фреймворки и библиотеки.

